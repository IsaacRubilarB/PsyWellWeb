<app-navbar></app-navbar>

<div class="citas-container">
  <h1>Citas</h1>

  <!-- Botón para agregar una nueva cita -->
  <div class="add-cita-button-container">
    <button class="btn-agregar-cita" (click)="abrirModal()">Agregar Cita</button>
  </div>

  <div class="cita-list-wrapper">
    <div class="cita-list" *ngIf="citas.length > 0">
      <div class="cita-card" *ngFor="let cita of citas.slice(0, 4)">
        <div class="cita-info">
          <div class="cita-header">
            <h3>Paciente ID: {{ cita.idUsuario }}</h3>
            <p class="cita-fecha">{{ cita.fechaHora | date:'short' }}</p>
          </div>
          <h4>Ubicación:</h4>
          <p>{{ cita.ubicacion }}</p>
          <h4>Comentarios:</h4>
          <p>{{ cita.comentarios }}</p>
        </div>
        <div class="estado-hover">{{ cita.estado | titlecase }}</div>
      </div>
    </div>

    <!-- Mostrar citas adicionales si existen más de 4 citas -->
    <div class="ver-mas-citas" *ngIf="citas.length > 4">
      <div class="cita-card" *ngFor="let cita of citas.slice(4)">
        <div class="cita-info">
          <div class="cita-header">
            <h3>Paciente ID: {{ cita.idUsuario }}</h3>
            <p class="cita-fecha">{{ cita.fechaHora | date:'short' }}</p>
          </div>
          <h4>Ubicación:</h4>
          <p>{{ cita.ubicacion }}</p>
          <h4>Comentarios:</h4>
          <p>{{ cita.comentarios }}</p>
        </div>
        <div class="estado-hover">{{ cita.estado | titlecase }}</div>
      </div>
    </div>
  </div>
</div>


<!-- Modal para agregar una nueva cita -->
<div class="modal" *ngIf="mostrarModal">
  <div style="text-align: center;" class="modal-content">
    <h2>Agregar Cita</h2>
    <form [formGroup]="citaForm" (ngSubmit)="guardarCita()">
      <div style="margin-bottom: 15px; text-align: center;">
        <label for="paciente" style="display: block; font-weight: bold; margin-bottom: 5px;">Paciente</label>
        <input type="text" id="paciente" formControlName="idUsuario" required style="width: 60%; padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
      </div>

      <div style="margin-bottom: 15px; text-align: center;">
        <label for="fechaHora" style="display: block; font-weight: bold; margin-bottom: 5px;">Fecha y Hora</label>
        <input type="datetime-local" id="fechaHora" formControlName="fechaHora" required style="width: 60%; padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
      </div>

      <div style="margin-bottom: 15px; text-align: center;">
        <label for="ubicacion" style="display: block; font-weight: bold; margin-bottom: 5px;">Ubicación</label>
        <input type="text" id="ubicacion" formControlName="ubicacion" required style="width: 60%; padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
      </div>

      <div style="margin-bottom: 15px; text-align: center;">
        <label for="comentarios" style="display: block; font-weight: bold; margin-bottom: 5px;">Comentarios</label>
        <textarea id="comentarios" formControlName="comentarios" style="width: 60%; padding: 10px; border-radius: 5px; border: 1px solid #ccc;"></textarea>
      </div>

      <button type="submit" [disabled]="!citaForm.valid">Guardar Cita</button>
      <button type="button" (click)="cerrarModal()">Cancelar</button>
    </form>
  </div>
</div>



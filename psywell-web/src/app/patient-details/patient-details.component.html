<app-navbar></app-navbar> 

<div class="patient-details">
  <h1>Detalles del Paciente</h1>
  
  <div class="patient-profile">
    <img class="patient-photo" [src]="patientDetails.photo || 'assets/patient.png'" alt="Foto del paciente" />
    <div class="patient-info">
      <h2>{{ patientDetails.name }}</h2>
      <p><strong>Edad:</strong> {{ patientDetails.age }} A침os</p>
      <p><strong>Diagn칩stico:</strong> {{ patientDetails.diagnosis }}</p>
      <p><strong>Notas:</strong> {{ patientDetails.notes }}</p>
    </div>

    <button class="btn-open-modal" (click)="openFichaPacienteModal()">Abrir Ficha del Paciente</button>
  </div>

  <!-- Filtro para alternar entre datos -->
  <div class="data-filter">
    <h2>{{ isRealTime ? 'Data en vivo' : 'Data Semanal' }}</h2>
    <button (click)="toggleDataView()" class="btn-toggle">{{ isRealTime ? 'Ver Data Semanal' : 'Ver Data en Vivo' }}</button>
  </div>
  
  <div class="charts-container">
    <div class="chart-wrapper">
      <div #heartAnimation class="lottie-animation"></div>
      <p class="bpm-display flip" [class.animate]="animateFlip">{{ bpm }} BPM</p>
      <p>Frecuencia Card칤aca</p>
    </div>
  
    <div class="chart-wrapper">
      <div #saturationAnimation class="lottie-animation"></div>
      <p class="saturation-display flip" [class.animate]="animateFlip">{{ saturationLevel }} %</p>
      <p>Saturaci칩n de Ox칤geno</p>
    </div>
  
    <div class="chart-wrapper">
      <div #stepsAnimation class="lottie-animation"></div>
      <p class="steps-display flip" [class.animate]="animateFlip">{{ steps }}</p>
      <p>Pasos</p>
    </div>
  
    <div class="chart-wrapper">
      <div #caloriesAnimation class="lottie-animation"></div>
      <p class="calories-display flip" [class.animate]="animateFlip">{{ calories }} kcal</p>
      <p>Gasto Cal칩rico</p>
    </div>
  </div>
  
  
  <div class="clearfix">
    <button class="btn-back" (click)="goBack()">Volver a Lista de Pacientes</button>
    <button class="btn-report" (click)="generateReport()">游늮 Informe emocional</button>
  </div>

  <div *ngIf="isFichaPacienteModalOpen" class="modal-container">
    <div class="modal-content">
      <app-ficha-paciente
        *ngIf="isFichaPacienteModalOpen"
        [patientId]="patientId || ''" 
        (closeModalEvent)="closeFichaPacienteModal()"
      ></app-ficha-paciente>
    </div>
  </div>
</div>

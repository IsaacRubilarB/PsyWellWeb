<app-navbar></app-navbar>

<div class="dashboard-container">
  <!-- Contenedor principal del dashboard -->
  <div class="header">
    <img src="assets/logo.png" alt="PsyWell Logo" class="logo" />
    <h1 class="welcome-message">
      Bienvenid{{ genero === 'femenino' ? 'a' : 'o' }},
      <ng-container *ngIf="genero === 'femenino'; else masculino">Dra.</ng-container>
      <ng-template #masculino>Dr.</ng-template>
      {{ psicologoName }}
    </h1>
  </div>

  <!-- Perfil y Portada -->
  <div class="profile-summary" [style.backgroundImage]="fondoPerfil || 'url(assets/default-cover.jpg)'">
    <div class="profile-picture-container" (click)="triggerFileInput('perfil')">
      <img [src]="fotoPerfil || 'assets/default-profile.png'" alt="Foto de Usuario" class="profile-picture" />
      <span class="edit-icon">✏️</span>
    </div>
    <div class="profile-details">
      <h2>{{ psicologoName }}</h2>
      <p>
        <ng-container *ngIf="genero === 'femenino'; else masculino">
          Psicóloga
        </ng-container>
        <ng-template #masculino>
          Psicólogo
        </ng-template>
        Especialista en Salud Mental
      </p>
      <p>Experiencia: {{ aniosExperiencia }} años</p>
    </div>
    <button class="btn-change-background" (click)="triggerFileInput('portada')">✏️</button>
    <input
      type="file"
      accept="image/*"
      (change)="onBackgroundUpload($event)"
      class="file-input"
      id="portada"
      style="display: none"
    />
    <input
      type="file"
      accept="image/*"
      (change)="onProfilePictureUpload($event)"
      class="file-input"
      id="perfil"
      style="display: none"
    />
  </div>

  <!-- Sección de Recordatorios y Estadísticas -->
  <div class="info-section">
    <div class="reminder-section">
      <h2>Recordatorios</h2>
      <div class="reminder-list">
        <div class="reminder-item">
          <i class="fas fa-bell"></i>
          <div class="reminder-text">
            <p class="reminder-title">Revisar progreso de Cristopher Soto</p>
            <span class="reminder-date">Fecha límite: 10/10/2024</span>
          </div>
        </div>
        <div class="reminder-item">
          <i class="fas fa-envelope"></i>
          <div class="reminder-text">
            <p class="reminder-title">Enviar informe mensual de María González</p>
            <span class="reminder-date">Fecha límite: 30/10/2024</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Sección de Estadísticas de Sesiones -->
    <div class="session-stats">
      <h2>Estadísticas de Sesiones</h2>
      <div class="stat-card">
        <i class="fas fa-user-clock"></i>
        <p>Sesiones Hoy</p>
        <strong>3</strong>
      </div>
      <div class="stat-card">
        <i class="fas fa-calendar-week"></i>
        <p>Sesiones de la Semana</p>
        <strong>15</strong>
      </div>
      <div class="stat-card">
        <i class="fas fa-user-friends"></i>
        <p>Pacientes Activos</p>
        <strong>10</strong>
      </div>
    </div>
  </div>

  <!-- Notas Rápidas -->
  <div class="sticky-notes-container">
    <h2>Notas Rápidas</h2>

    <div class="add-note-form">
      <input type="text" [(ngModel)]="newNoteTitle" placeholder="Título de la nota" />
      <textarea [(ngModel)]="newNoteContent" placeholder="Contenido de la nota"></textarea>
      <button (click)="addStickyNote()">Añadir Nota</button>
    </div>

    <div class="note-controls">
      <input type="text" placeholder="Buscar nota..." [(ngModel)]="searchQuery" (input)="filterNotes()" />
      <button (click)="sortNotes()">Ordenar Alfabéticamente</button>
    </div>

    <!-- Carrusel de Notas -->
    <div *ngIf="isCarouselActive" class="note-carousel">
      <button class="prev" (click)="prevNote()">‹</button>
      <div *ngFor="let note of filteredNotes; let i = index" class="sticky-note-carousel" [ngClass]="getCurrentNoteClass(i)">
        <h3>{{ note.title }}</h3>
        <p>{{ note.content }}</p>
      </div>
      <button class="next" (click)="nextNote()">›</button>
    </div>

    <!-- Lista de Notas Filtradas -->
    <div *ngIf="!isCarouselActive" class="sticky-notes-list">
      <div *ngFor="let note of filteredNotes; let i = index" class="sticky-note-item">
        <h3>{{ note.title }}</h3>
        <p>{{ note.content }}</p>
        <button (click)="removeStickyNote(i)">Eliminar</button>
      </div>
    </div>
  </div>
</div>